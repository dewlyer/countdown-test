define("countdown/defaults",{auto:!0,appoint:Date.now()+864e7,current:Date.now(),days:'<div class="digit days">',hours:'<div class="digit hours">',minutes:'<div class="digit minutes">',seconds:'<div class="digit seconds">',marker:{seconds:":",minutes:":",hours:"-",days:""},canvas:'<canvas id="canvas" class="canvas" width="600" height="300"><p>您的浏览器不支持Canvas！</p></canvas>',template:'<div class="unit">  <div class="unit-top">    <span class="unit-wrap"></span>  </div>  <div class="unit-shadow-top"></div>  <div class="unit-bottom">    <span class="unit-wrap"></span>  </div>  <div class="unit-shadow-bottom"></div><div>'}),define("countdown/prototype",[],function(){return{init:function(){var t=this;t.appoint=new Date(t.settings.appoint),t.current=new Date(t.settings.current),t.fontSize=50,t.build(),t.start()},build:function(){var t=this;console.log(t.element),t.$canvas=$(t.settings.canvas),t.$canvas.appendTo(t.element);var n=$(window).innerWidth(),e=$(window).innerHeight();t.$canvas[0].width=n,t.$canvas[0].height=e,t.$canvas.css({display:"block",width:n,height:e}),t.canvas=t.$canvas.get(0),t.ctx=t.canvas.getContext("2d"),t.calculate(),t.offset={days:{x:200,y:0},hours:{x:380,y:0},minutes:{x:460,y:0},seconds:{x:540,y:0}};var s=t.days.toString().length<2?2:t.days.toString().length,i=t.hours.toString().length<2?2:t.hours.toString().length,a=t.minutes.toString().length<2?2:t.minutes.toString().length,o=t.seconds.toString().length<2?2:t.seconds.toString().length,r=s+i+a+o;t.offset.days={x:0-r*t.fontSize/2,y:0},t.offset.hours={x:t.offset.days.x+t.fontSize*s,y:0},t.offset.minutes={x:t.offset.hours.x+t.fontSize*i,y:0},t.offset.seconds={x:t.offset.minutes.x+t.fontSize*a,y:0}},start:function(){var t=this;t.refresh(),t.settings.auto&&(t.timer=setInterval(function(){t.refresh()},1e3))},refresh:function(){var t=this;t.calculate(Date.now()),t.refreshCanvas()},refreshCanvas:function(){var t=this;t.cleanCanvas(),t.render()},refreshUnit:function(t,n){var e=this;if("undefined"!=typeof t){var s=e.splitNum(n),i=s.length-t.find(".unit-set").length;i>0?t.find(".unit-set").slice(0,i).clone().prependTo(t):0>i&&t.find(".unit-set").slice(i).remove();var a=t.find(".unit-set");$.each(s,function(t,n){var s=a.eq(t).find(".unit");if(s.data("value")==n)return!0;s.data("value",n);var i=n-1,o=n==s.length-1?0:n+1;s.removeClass("active previous following"),e.comming?s.eq(o).addClass("following"):s.eq(i).addClass("previous"),s.eq(n).addClass("active")})}},render:function(){var t=this;t.renderCanvas(t.days,t.offset.days,t.settings.marker.days),t.renderCanvas(t.hours,t.offset.hours,t.settings.marker.hours),t.renderCanvas(t.minutes,t.offset.minutes,t.settings.marker.minutes),t.renderCanvas(t.seconds,t.offset.seconds,t.settings.marker.seconds)},renderCanvas:function(t,n,e){var s=this,i=s.ctx;s.setRenderStyle(),i.save(),i.translate(s.canvas.width/2,s.canvas.height/2),t=10>t?"0"+t:t,i.fillText(t,n.x,n.y),i.fillText(e,n.x-s.fontSize,n.y),i.restore()},renderUnit:function(t,n,e,s){if("undefined"!=typeof t){var i=this,a=i.splitNum(n);$.each(a,function(n,e){var a=9;s&&(a=$.isArray(s)?s[n]:s);var o=i.clone(a);o.data("value",e),t.append(o)}),t.append('<div class="split">'+e+"</div>")}},cleanCanvas:function(){var t=this,n=t.ctx;n.clearRect(0,0,t.canvas.width,t.canvas.height)},setRenderStyle:function(){var t=this,n=t.ctx;n.font=t.fontSize+"px Arial",n.fillStyle="#333333",n.textAlign="center",n.textBaseline="middle"},clone:function(t){for(var n=this,e=$('<div class="unit-set">'),s=0;t>=s;s++)e.append(n.settings.template),$(".unit:last",e).find(".unit-wrap").text(s);return e},splitNum:function(t){var n=[],e=0;do e=t%10,t=parseInt(t/10),n.push(e);while(t>=1);return n.length<=1&&n.push(0),n.reverse(),n},calculate:function(t){var n=this;t=t||n.current,n.comming=t<n.appoint;var e=Math.abs(t-n.appoint),s=e/1e3;n.seconds=Math.floor(s)%60,n.minutes=Math.floor(s/60)%60,n.hours=Math.floor(s/3600)%24,n.days=Math.floor(s/86400)}}}),define("countdown/constructor",["./defaults","./prototype"],function(t,n){var e=function(n,e){this.timer=null,this.comming=!0,this.element=n,this.defaults=t,this.options=e,this.settings=$.extend({},this.defaults,this.options)};return e.prototype=n,e}),define("app.js",["jquery","countdown/constructor"],function(t,n){t.fn.countdown=function(e){return this.each(function(){var s=new n(this,e);t(this).data("countdown")||t(this).data("countdown",s),s.init()})}});